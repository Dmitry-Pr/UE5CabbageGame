# Cabbage Game
## Выполнил 
__Мухин Дмитрий Владимирович__

## Генерация комнат
Генерация происходит с помощью плагина PCG. 

Он представляет из себя граф, который построен на замкнутом spline. 

Этот сплайн я генерирую таким образом, чтобы комната имела правильную , но все же случайную форму.

Персонаж и выходы спавнятся на просчитанных координатах в комнате. Так же происходит с финишом.

В PCG уже по точкам, полученным со spline генерируется комната и заполняется ловушками и бафами.

В этот граф передаются параметры, задающие сложность уровня.

От сложности уровня зависит плотность выбранных точек, в которые спавнятся ловушки.

Если подробнее, точки на сплайне генерируются по порядку, я сначала пытался сделать так, чтобы можно было задать сколько угодно точек, чтобы комнаты отличались по форме еще сильнее, но остановился на 4 базовых точках.

Делю квадрат комнаты на 9 квадратиков, точки сплайна создаются в 4 угловых квадратах случайно.

Затем добавляю еще 4 точки, чтобы жестко задать стену начала и стену финиша в комнате.

Высчитываю центры этих стен и добавляю туда персонажа и финиш комнаты соответственно. 

В Графе создаются пол, стены, потолок лампы по подобранным параметрам смещения сгенерированных точек.

Потом по этим точкам уже спавнятся в случайных местах случайные баффы и ловушки.

Если захочется разобраться, спавнятся не сами акторы, а их спавнеры, где потом случайно выбирается тип нужной ловушки или баффа.

## Изменение уровня сложности

Уровень сложности может быть от 1 до количества комнат.

Если пройти в зеленую дверь, уровень сложности останется прежним, если в красную - увеличится на единицу.

От уровня сложности меняется количество сгенерированных ловушек.

## Дополнения

Поработал с niagara, чтобы хоть как-то поярче сделать дизайн

В целом старался сделать проект расширяемым, можно легко изменить траекторию копий и камней, для этого надо изменить руками сплайн траектории.

Для управления здоровьем использовал компонент

Оптимизировал количество акторов на сцене в один момент. В каждый момент существует только одна комната. Конечно, иногда можно увидеть, что комната налету собирается под ногами, но это для будущих доработок)

## Проекты
Не брал код из других готовых проектов, только из YouTube по определенным нуждам, небольшие фрагменты.

## Впечатления
Это было долго, больно, еще раз долго, еще раз больно, но все же интересно. С нуля до какого-то уровня понимания в основных частях UE5 точно продвинулся.
